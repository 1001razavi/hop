name: Setup
description: Common setup steps used by our workflows
runs:
  using: composite
  steps:
    - name: Checkout code
      uses: actions/checkout@v4

    # Automatically caches deps
    # https://github.com/actions/setup-node?tab=readme-ov-file#caching-global-packages-data
    - name: Setup node
      uses: actions/setup-node@v4
      with:
        node-version-file: .nvmrc
        registry-url: https://registry.npmjs.org
        cache: pnpm

    - name: Setup pnpm
      uses: pnpm/action-setup@v4
      with:
        version: 9
        run_install: false
